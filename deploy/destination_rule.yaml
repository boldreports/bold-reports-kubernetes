apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: id-web-rule
spec:
  host: id-web-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.id.web.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: id-api-rule
spec:
  host: id-api-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.id.api.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: id-ums-rule
spec:
  host: id-ums-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.id.ums.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: reports-web-rule
spec:
  host: reports-web-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.reports.web.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: reports-api-rule
spec:
  host: reports-api-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.reports.api.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: reports-jobs-rule
spec:
  host: reports-jobs-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.reports.jobs.pod.id
          ttl: 600s
---
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  namespace: bold-services
  name: reports-reportservice-rule
spec:
  host: reports-reportservice-service.bold-services.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: boldreports.k8s.reports.reportservice.pod.id
          ttl: 600s